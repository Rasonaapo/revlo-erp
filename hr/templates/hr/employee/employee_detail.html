<!-- employee_list.html -->
{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-lg-4 col-xl-4">
        <div class="card text-center">
            <div class="card-body">
                <img src="{{ employee.photo.url }}" class="rounded-circle avatar-lg img-thumbnail"
                alt="profile-image">

                <h4 class="mb-0">{{ employee }} - {{ employee.employee_id }}</h4>
                <p class="text-muted">@{{ employee.job.job_title}} ({{ employee.get_employment_type_display }})</p>
                {% comment %} <p class="text-muted"><i class="mdi mdi-office-building"></i> {{ employee.job.department }} Dept.</p> {% endcomment %}

                <a href="{% url 'employee-update' employee.id %}" title="Edit {{ employee }}"><button class="btn btn-xs btn-outline-warning rounded-pill waves-effect waves-light"><i class="fe-edit"></i></button></a>

                <h5 class="mb-3 mt-4 text-uppercase bg-light p-2"><i class="mdi mdi-account-circle me-1"></i> Personal Information</h5>

                <div class="text-start mt-3">
                    <p class="text-muted mb-2 font-13"><strong>Date of Birth :</strong> <span class="ms-2">{{ employee.dob|date:'d M, Y' }} ({{ employee.get_age }} Years)</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Mobile :</strong><span class="ms-2">{{ employee.format_phone_number }}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Email :</strong> <span class="ms-2">{{employee.email}}</span></p>

                    <p class="text-muted mb-1 font-13"><strong>Location :</strong> <span class="ms-2"></span></p>

                    <p class="text-muted mb-2 font-13"><strong>National ID :</strong> <span class="ms-2">{{employee.id_type }}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>ID Number :</strong> <span class="ms-2">{{employee.id_number }}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>SSNIT :</strong> <span class="ms-2">{{employee.ssnit}}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>TIN :</strong> <span class="ms-2">{{employee.tin|default:'-'}}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Skills :</strong> <span class="ms-2">{{ employee.display_employee_skill }}</span></p>
                   
                    <p class="text-muted mb-2 font-13"><strong>Missing Skills :</strong> <span class="ms-2">{{ employee.missing_skills }}</span></p>


                    <p class="text-muted mb-2 font-13"><strong>Added :</strong> <span class="ms-2">{{employee.created_at|date:'d M, Y'}}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Updated :</strong> <span class="ms-2">{{employee.updated_at|date:'d M, Y'}}</span></p>


                </div>

                <h5 class="mb-3 mt-4 text-uppercase bg-light p-2"><i class="mdi mdi-account-circle me-1"></i> Department Information</h5>
                <div class="text-start mt-3">

                    <p class="text-muted mb-2 font-13"><strong>Department :</strong><span class="ms-2">{{ employee.job.department }}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Hired on :</strong> <span class="ms-2">{{ employee.hire_date|date:'d M, Y' }} </span></p>


                    <p class="text-muted mb-2 font-13"><strong>Salary Grade :</strong> <span class="ms-2">{{employee.salary_grade.grade}}</span></p>

                    <p class="text-muted mb-1 font-13"><strong>Step :</strong> <span class="ms-2"> {{employee.salary_grade.grade_step}}</span></p>
                </div>

                <h5 class="mb-3 mt-4 text-uppercase bg-light p-2"><i class="mdi mdi-account-circle me-1"></i> Bank Information</h5>
                <div class="text-start mt-3">

                    <p class="text-muted mb-2 font-13"><strong>Bank :</strong><span class="ms-2">{{ employee.bank }}</span></p>

                    <p class="text-muted mb-2 font-13"><strong>Branch :</strong> <span class="ms-2">{{ employee.branch }} </span></p>


                    <p class="text-muted mb-2 font-13"><strong>A/C Number :</strong> <span class="ms-2">{{employee.account_number}}</span></p>

                </div>

                

                <ul class="social-list list-inline mt-3 mb-0">
                    <li class="list-inline-item">
                        <a href="javascript: void(0);" class="social-list-item border-primary text-primary"><i class="mdi mdi-facebook"></i></a>
                    </li>
                    <li class="list-inline-item">
                        <a href="javascript: void(0);" class="social-list-item border-danger text-danger"><i class="mdi mdi-google"></i></a>
                    </li>
                    <li class="list-inline-item">
                        <a href="javascript: void(0);" class="social-list-item border-info text-info"><i class="mdi mdi-twitter"></i></a>
                    </li>
                    <li class="list-inline-item">
                        <a href="javascript: void(0);" class="social-list-item border-secondary text-secondary"><i class="mdi mdi-github"></i></a>
                    </li>
                </ul>
            </div>
        </div> <!-- end card -->

        <div class="card">
            <div class="card-body">
                <h4 class="header-title mb-3">Guarantor</h4>

                <div class="inbox-widget" data-simplebar style="max-height: 350px;">
                   {% for guarantor in guarantors %} 
                    <div class="inbox-item">
                        <div class="inbox-item-img"><img src="assets/images/users/user-2.jpg" class="rounded-circle" alt=""></div>
                        <p class="inbox-item-author">{{ guarantor.guarantor_name }}</p>
                        <p class="inbox-item-date">
                            <a href="javascript:(0);" class="btn btn-sm btn-link text-info font-13"> {{ guarantor.format_phone_number }} </a>
                        </p>
                    </div>
                    {% endfor %}

                </div> <!-- end inbox-widget -->
            </div>
        </div> <!-- end card-->

    </div> <!-- end col-->

    <div class="col-lg-8 col-xl-8">
        <div class="card">
            <div class="card-body">
                <ul class="nav nav-pills nav-fill navtab-bg">
                    <li class="nav-item">
                        <a href="contacts-profile.html#aboutme" data-bs-toggle="tab" aria-expanded="false" class="nav-link">
                            Job History
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="contacts-profile.html#timeline" data-bs-toggle="tab" aria-expanded="true" class="nav-link active">
                            Documents
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="contacts-profile.html#settings" data-bs-toggle="tab" aria-expanded="false" class="nav-link">
                            Settings
                        </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane" id="aboutme">

                        <h5 class="mb-4 text-uppercase"><i class="mdi mdi-briefcase me-1"></i>
                            History</h5>

                        <ul class="list-unstyled timeline-sm">
                            {% for history in histories %}
                            <li class="timeline-sm-item">
                                <span class="timeline-sm-date">{{ history.start_date|date:'Y - m' }}</span>
                                <h5 class="mt-0 mb-1">{{ history.job }}</h5>
                                <p>{{ history.job.department.department_name}}</p>
                                <p class="text-muted mt-2">Everyone realizes why a new common language
                                    would be desirable: one could refuse to pay expensive translators.
                                    To achieve this, it would be necessary to have uniform grammar,
                                    pronunciation and more common words.</p>

                            </li>
                            {% endfor %}


                        </ul>



                    </div> <!-- end tab-pane -->
                    <!-- end about me section content -->

                    <div class="tab-pane show active" id="timeline">

                        <!-- comment box -->
                        <h5 class="mb-3 mt-4 text-uppercase"><i class="mdi mdi-cards-variant me-1"></i>
                            Files</h5>
                        <div class="table-responsive">
                           {% if documents %}
                            <table class="table table-borderless mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>#</th>
                                        <th>Document Type</th>
                                        <th>Uploaded Date</th>
                                        <th>Download</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for document in documents %}
                                    <tr>
                                        <td>{{ forloop.counter }}</td>
                                        <td>{{ document.document_type }}</td>
                                        <td>{{ document.created_at|date:'d M, Y'}}</td>
                                        <td>
                                            <a href="{{ document.document_file.url }}">Download <i class="fas fa-cloud-download-alt"></i></a>
                                        </td>
                                    </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                            {% else %}
                                <center> <span> No documents uploaded yet! </span></center>

                            {% endif %}
                        </div>
                        <!-- end comment box -->

                    </div>
                    <!-- end timeline content-->

                    <div class="tab-pane" id="settings">

                    </div>
                    <!-- end settings content-->

                </div> <!-- end tab-content -->
            </div>
        </div> <!-- end card-->

    </div> <!-- end col -->
</div>
<!-- end row-->
 
{% endblock %}